<!DOCTYPE html>
<html lang="en">
<head>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>

<script>
  // Auth Guard: Agar user login nahi hai, to Landing Page par bhejo
  const user = localStorage.getItem('imranUser');
  if (!user) {
    window.location.href = 'landing.html';
  }
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMRAN SQUARE - Dashboard</title>

        <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#ff6b35">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="IMRAN SQUARE">
       
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Icons for iOS -->
    <link rel="apple-touch-icon" href="/resources/icon-152.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/resources/icon-152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/resources/icon-192.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/resources/icon-192.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/resources/icon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/resources/icon-16.png">
    <link rel="shortcut icon" href="/resources/favicon.ico">

    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>
    
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js" async defer></script>

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    
<style>
  /* ===== THEME CONSISTENCY + PREMIUM BACKGROUNDS ===== */
  :root {
    --bg-primary: #000000;
    --bg-secondary: #0a0a0a;
    --text-primary: #ffffff;
    --text-secondary: #888888;
    --text-muted: #ededed;
    --border-color: #2a2a2a;
    --border-subtle: #1f1f1f;
    --glass-bg: rgba(255, 255, 255, 0.03);
    --glass-border: rgba(255, 255, 255, 0.08);
    --glass-hover: rgba(255, 255, 255, 0.05);
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    background-color: var(--bg-primary);
    color: var(--text-muted);
    overflow-x: hidden;
    position: relative;
  }

  /* ===== BACKGROUND LAYER 1: Main Dashboard BG (hero-bg.jpg) ===== */
  .bg-layer-main {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('resources/hero-bg.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.15;
    filter: blur(2px) brightness(0.7);
    z-index: -3;
  }

  /* ===== BACKGROUND LAYER 2: Hero Section Overlay (dashboard-preview.jpg) ===== */
  .bg-layer-hero {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 60vh;
    background-image: url('resources/dashboard-preview.jpg');
    background-size: cover;
    background-position: center top;
    opacity: 0.08;
    mask-image: linear-gradient(to bottom, black 0%, transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, black 0%, transparent 100%);
    z-index: -2;
  }

  /* ===== BACKGROUND LAYER 3: Bottom Accent (3rd heavy curved.jpg) ===== */
  .bg-layer-accent {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 50vh;
    background-image: url('resources/3rd heavy curved.jpg');
    background-size: cover;
    background-position: center bottom;
    opacity: 0.12;
    filter: blur(3px);
    mask-image: linear-gradient(to top, black 20%, transparent 100%);
    -webkit-mask-image: linear-gradient(to top, black 20%, transparent 100%);
    z-index: -1;
    mix-blend-mode: screen;
  }

  /* ===== Dark Overlay for Better Readability ===== */
  .overlay-dark {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, 
      rgba(0,0,0,0.8) 0%, 
      rgba(10,10,10,0.9) 50%, 
      rgba(0,0,0,0.85) 100%);
    z-index: -2;
    pointer-events: none;
  }

  /* ===== Content Container ===== */
  .content-wrapper {
    position: relative;
    z-index: 1;
    min-height: 100vh;
  }

  /* Glass Cards - Match Landing Style */
  .glass-card {
    background: rgba(10, 10, 10, 0.6);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 12px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  .glass-card:hover {
    background: rgba(15, 15, 15, 0.7);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
  }

  /* Buttons - Match Login Style */
  .btn-primary {
    background: linear-gradient(to bottom, #fafafa, #f5f5f5);
    color: #000;
    border: 1px solid #e5e5e5;
    border-radius: 10px;
    padding: 12px 20px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  }

  .btn-primary:hover {
    background: linear-gradient(to bottom, #f5f5f5, #efefef);
    border-color: #d4d4d4;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
    transform: translateY(-1px);
  }

  .btn-secondary {
    background: rgba(26, 26, 26, 0.8);
    color: #fff;
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 12px 20px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
    backdrop-filter: blur(5px);
  }

  .btn-secondary:hover {
    background: rgba(42, 42, 42, 0.9);
    border-color: #3a3a3a;
    transform: translateY(-1px);
  }

  /* Input Fields - Match Login Style */
  .input-field {
    width: 100%;
    padding: 12px 16px;
    background-color: rgba(10, 10, 10, 0.8);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    color: var(--text-primary);
    font-size: 14px;
    transition: all 0.2s;
    backdrop-filter: blur(5px);
  }

  .input-field:focus {
    outline: none;
    border-color: #4a4a4a;
    background-color: rgba(15, 15, 15, 0.9);
  }

  .input-field::placeholder {
    color: var(--text-secondary);
  }

  /* Project Cards */
  .project-card {
    background: rgba(10, 10, 10, 0.6);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  .project-card:hover {
    background: rgba(15, 15, 15, 0.7);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
  }

  /* Navigation/Header */
  .nav-header {
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border-bottom: 1px solid var(--border-subtle);
  }

  /* Modal/Dialog */
  .modal-overlay {
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(8px);
  }

  .modal-content {
    background: rgba(10, 10, 10, 0.95);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    backdrop-filter: blur(20px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
  }

  /* Stats/Badges */
  .stat-badge {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 8px 12px;
    font-size: 12px;
    color: var(--text-secondary);
    backdrop-filter: blur(5px);
  }

  /* Search Bar */
  .search-bar {
    background: rgba(10, 10, 10, 0.8);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 10px 16px;
    color: var(--text-primary);
    backdrop-filter: blur(10px);
  }

  .search-bar:focus {
    border-color: #4a4a4a;
    outline: none;
    background: rgba(15, 15, 15, 0.9);
  }

  /* Scrollbar Styling */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: rgba(10, 10, 10, 0.5);
  }

  ::-webkit-scrollbar-thumb {
    background: #2a2a2a;
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #3a3a3a;
  }

  /* Floating Animation for Cards */
  @keyframes floatCard {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-8px);
    }
  }

  .project-card:hover {
    animation: floatCard 2s ease-in-out infinite;
  }

  /* Fade In Animation */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .fade-in {
    animation: fadeIn 0.6s ease-out;
  }
</style>

</head>
<body>
    <canvas class="film-grain" id="filmGrain"></canvas>

  <!-- Background Layers -->
  <div class="bg-layer-main"></div>
  <div class="overlay-dark"></div>
  <div class="bg-layer-hero"></div>
  <div class="bg-layer-accent"></div>
  
  <!-- Your existing content... -->


  <!-- ===== MAIN CONTENT WRAPPER ===== -->
  <div class="content-wrapper">
    
    <!-- Your existing dashboard content here -->
    <header class="nav-header">
      <!-- Header content -->
    </header>

    <main class="px-6 py-8">
      <!-- Dashboard content -->
      <div id="projectCards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Project cards will render here -->
      </div>
    </main>

  </div>
  
  <!-- Modals, scripts, etc. -->


<header class="sticky top-0 z-30 bg-black/80 backdrop-blur-md border-b border-white/5">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 h-16 flex items-center justify-between">

            <div class="flex items-center gap-3">
                <div class="w-9 h-9 rounded-xl border border-orange-500/30 bg-white/5 flex items-center justify-center overflow-hidden">
                    <img src="resources/icon-32.png" alt="Logo" class="w-5 h-5 opacity-90">
                </div>
                <div class="hidden md:block leading-tight">
                    <p class="text-[10px] text-gray-500 uppercase tracking-wider">Studio</p>
                    <p class="text-xs font-bold text-white">IMRAN SQUARE</p>
                </div>
            </div>

            <div class="flex items-center gap-4">
                
                <div class="relative w-60 hidden sm:block">
                    <input type="text" placeholder="Search projects..." 
                        class="w-full bg-white/5 border border-white/10 rounded-full py-2 pl-4 pr-10 text-xs text-white focus:outline-none focus:border-orange-500/50 transition">
                    <svg class="w-4 h-4 text-gray-500 absolute right-3 top-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                </div>

                <div class="relative">
                    <button id="userAvatarButton" class="w-9 h-9 rounded-full bg-gradient-to-br from-orange-600 to-orange-800 border border-orange-400/30 flex items-center justify-center text-xs font-bold text-white shadow-lg hover:scale-105 transition">
                        <span id="userAvatarFallback">IS</span>
                        <img id="userAvatarImg" src="" class="hidden w-full h-full object-cover rounded-full">
                    </button>

                    <div id="userMenu" class="hidden absolute top-12 right-0 w-60 bg-[#111] border border-white/10 rounded-xl shadow-2xl z-50">
                        <div class="p-4 border-b border-white/5">
                            <p id="userMenuName" class="text-white font-semibold text-sm">User</p>
                            <p id="userMenuEmail" class="text-xs text-gray-500 truncate">email@example.com</p>
                        </div>
                        
                        <a href="account.html" id="userMenuAccount" class="block w-full text-left px-4 py-3 text-sm text-gray-300 hover:bg-white/5 transition decoration-0">
                            Account Settings
                        </a>
                        
                        <button id="userMenuSignOut" class="w-full text-left px-4 py-3 text-sm text-red-400 hover:bg-white/5 transition border-t border-white/5">
                            Sign Out
                        </button>
                    </div>
                </div>

            </div>

        </div>
    </header>
       <!-- Main hero/layout -->
    <div class="hero-bg flex flex-col">
        <div
          class="content-layer flex-1 w-full max-w-6xl mx-auto
                 px-4 sm:px-6
                 pt-4 sm:pt-6
                 pb-20 sm:pb-24
                 space-y-6">

            <!-- Mobile search (chhota screen par hi dikhega) -->
            <div class="md:hidden mb-4">
                <div class="relative">
                    <div class="absolute top-1/2 left-3 -translate-y-1/2 pointer-events-none">
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                 <input
    type="text"
    placeholder="Search projects..."
    class="w-full bg-[#1a1a1a] border border-[#2a2a2a] text-white pl-9 pr-3 py-2.5 rounded-lg text-sm focus:border-orange-500 focus:outline-none">

                </div>
            </div>

            <!-- yahan se tumhara baaki content (summary cards, Active Projects, Recent Activity, etc.) -->


            
           <div class="grid grid-cols-3 gap-2 sm:gap-4 mb-6">

    <!-- Projects -->
    <div class="relative overflow-hidden rounded-2xl bg-black/70 backdrop-blur-xl border border-white/5 shadow-[0_22px_60px_rgba(0,0,0,0.95)]">

        <div class="absolute inset-0 bg-gradient-to-br from-orange-500/10 via-transparent to-black/60 pointer-events-none"></div>
        <div class="relative px-5 py-4 flex flex-col items-center">
            <div class="text-[11px] tracking-[0.25em] uppercase text-gray-400 mb-1">Projects</div>
            <div class="text-4xl font-semibold text-orange-400 leading-none mb-2" id="project-count">12</div>
            <div class="flex items-center gap-2 text-[11px] text-gray-500">
                <span class="w-1.5 h-1.5 rounded-full bg-emerald-400 shadow-[0_0_8px_rgba(16,185,129,0.9)]"></span>
                <span>4 active</span>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <div class="relative overflow-hidden rounded-2xl bg-black/70 backdrop-blur-xl border border-white/5 shadow-[0_22px_60px_rgba(0,0,0,0.95)]">

        <div class="absolute inset-0 bg-gradient-to-br from-sky-500/10 via-transparent to-black/60 pointer-events-none"></div>
        <div class="relative px-5 py-4 flex flex-col items-center">
            <div class="text-[11px] tracking-[0.25em] uppercase text-gray-400 mb-1">Scripts</div>
            <div class="text-4xl font-semibold text-orange-400 leading-none mb-2" id="script-count">54</div>
            <div class="flex items-center gap-2 text-[11px] text-gray-500">
                <span class="w-1.5 h-1.5 rounded-full bg-sky-400 shadow-[0_0_8px_rgba(56,189,248,0.9)]"></span>
                <span>10 in progress</span>
            </div>
        </div>
    </div>

    <!-- Videos -->
    <div class="relative overflow-hidden rounded-2xl bg-black/70 backdrop-blur-xl border border-white/5 shadow-[0_22px_60px_rgba(0,0,0,0.95)]">

        <div class="absolute inset-0 bg-gradient-to-br from-amber-500/12 via-transparent to-black/60 pointer-events-none"></div>
        <div class="relative px-5 py-4 flex flex-col items-center">
            <div class="text-[11px] tracking-[0.25em] uppercase text-gray-400 mb-1">Videos</div>
            <div class="text-4xl font-semibold text-orange-400 leading-none mb-2" id="video-count">8</div>
            <div class="flex items-center gap-2 text-[11px] text-gray-500">
                <span class="w-1.5 h-1.5 rounded-full bg-amber-400 shadow-[0_0_8px_rgba(251,191,36,0.9)]"></span>
                <span>3 rendering</span>
            </div>
        </div>
    </div>
</div>

            
<!-- Active Projects Heading with My/All Toggle -->
<div class="mb-6">
  <div class="flex items-center justify-between mb-3 sm:mb-4">
    <div class="flex items-center gap-3">
      <h2 class="font-display text-lg sm:text-xl font-semibold">Active Projects</h2>
      

      
      <!-- My / All Toggle -->
      <div id="projectScopeToggle" class="inline-flex bg-black/40 border border-white/10 rounded-full px-1 py-1 text-[11px]">
        <button data-scope="my" class="px-3 py-1 rounded-full active-scope transition-all bg-orange-500/20 text-orange-400">
          My
        </button>
        <button data-scope="all" class="px-3 py-1 rounded-full transition-all text-gray-400 hover:text-white">
          All
        </button>
      </div>
    </div>

    <div class="flex gap-3">
      <button id="dashEditorToggle" class="text-gray-400 hover:text-orange-500 transition p-2 rounded hover:bg-gray-800" title="Edit Projects">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/></svg>
      </button>
      <button class="text-orange-500 text-sm font-medium">View All</button>
    </div>
  </div>
  
  <!-- Projects Grid -->
  <div class="scroll-wrapper">
    <div id="projectCards" class="space-y-6" style="overflow-y: auto; max-height: calc(100vh - 500px); padding: 0 15px 0 0;"></div>
  </div>
</div>


            <div class="mb-6">
                <h2 class="font-display text-xl font-semibold mb-4">Recent Activity</h2>
                <div class="space-y-3 pl-4 border-l border-gray-700">
                    <div class="mb-3"><div class="text-sm text-white">AI analyzed "Midnight City Chronicles"</div><div class="text-xs text-gray-400 font-mono">2 hours ago</div></div>
                    <div class="mb-3"><div class="text-sm text-white">Added 3 videos to "Neon Dreams"</div><div class="text-xs text-gray-400 font-mono">4 hours ago</div></div>
                </div>
            </div>
        </div>
    </div>

    <button id="fabButton"
  class="fixed bottom-24 sm:bottom-24 right-4 sm:right-6
         w-14 h-14 bg-orange-500 rounded-full flex items-center justify-center
         shadow-lg z-50 text-black hover:scale-110 transition-transform">
  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
  </svg>
</button>

<!-- Create New Project Modal -->
<div id="projectModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
  <div class="relative w-full max-w-md">
    <!-- Outer glow -->
    <div class="absolute -inset-4 bg-gradient-to-br from-orange-500/20 via-transparent to-black/80 rounded-3xl blur-2xl opacity-70 pointer-events-none"></div>

    <!-- Card -->
    <div class="relative bg-[#101010] border border-white/10 rounded-3xl px-8 py-7 shadow-[0_22px_60px_rgba(0,0,0,0.95)]">
      <!-- Top accent -->
      <div class="absolute inset-x-8 -top-px h-px bg-gradient-to-r from-transparent via-orange-400/70 to-transparent"></div>

      <!-- Header -->
      <header class="mb-6">
        <p class="text-[11px] uppercase tracking-[0.25em] text-orange-400/80 mb-1">Project setup</p>
        <h2 class="text-2xl font-display font-semibold text-white drop-shadow-sm">Create New Project</h2>
      </header>

      <!-- Title Input -->
      <div class="mb-5">
        <label class="flex items-center justify-between text-xs text-gray-400 mb-1.5">
          <span>Project Title</span>
          <span class="text-[10px] uppercase tracking-wide text-gray-500">Required</span>
        </label>
        <div class="relative">
          <input
            type="text"
            id="projectTitle"
            placeholder="eg. Midnight City Chronicles"
            class="w-full bg-[#141414] border border-[#262626] rounded-xl px-4 py-2.5 text-sm text-white placeholder-gray-500 focus:border-orange-500 focus:ring-1 focus:ring-orange-500/50 outline-none transition"
          />
        </div>
        <p id="titleError" class="text-[11px] text-red-400 mt-1 hidden">Please enter a project title.</p>
      </div>

      <!-- Genre Dropdown -->
      <div class="mb-6">
        <label class="flex items-center justify-between text-xs text-gray-400 mb-1.5">
          <span>Genre</span>
          <span class="text-[10px] uppercase tracking-wide text-gray-500">Optional</span>
        </label>
        <div class="relative">
          <select
            id="projectGenre"
            class="w-full bg-[#141414] border border-[#262626] rounded-xl px-4 py-2.5 text-sm text-white focus:border-orange-500 focus:ring-1 focus:ring-orange-500/50 outline-none appearance-none pr-9"
          >
            <option value="Film Noir">Film Noir</option>
            <option value="Sci-Fi">Sci‚ÄëFi</option>
            <option value="Thriller">Thriller</option>
            <option value="Documentary">Documentary</option>
            <option value="Drama">Drama</option>
            <option value="Action">Action</option>
            <option value="Comedy">Comedy</option>
            <option value="Horror">Horror</option>
            <option value="Other">Other</option>
          </select>
          <span class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-xs">‚ñæ</span>
        </div>
      </div>

      <!-- Buttons -->
      <div class="mt-2 flex gap-3">
  <button
    id="cancelModal"
    class="flex-1 h-11 rounded-xl text-sm font-medium text-gray-300 border border-white/10 bg-transparent hover:bg-white/5 transition"
  >
    Cancel
  </button>

  <!-- Create: deep orange gradient -->
  <button
    id="createProject"
    class="flex-1 h-11 rounded-xl text-sm font-semibold text-black
           bg-[radial-gradient(circle_at_20%_0%,#ffb27a_0,#ff7a3b_35%,#ff4b1f_100%)]
           shadow-[0_0_22px_rgba(255,120,60,0.7)]
           hover:shadow-[0_0_30px_rgba(255,120,60,0.95)]
           hover:translate-y-[1px]
           transition"
  >
    Create
  </button>

  <!-- Create & Open: warm gold gradient -->
  <button
    id="createAndOpen"
    class="flex-1 h-11 rounded-xl text-sm font-semibold text-black
           bg-[radial-gradient(circle_at_20%_0%,#ffe9a3_0,#ffd45a_35%,#ffb200_100%)]
           shadow-[0_0_22px_rgba(255,200,80,0.7)]
           hover:shadow-[0_0_30px_rgba(255,210,100,0.95)]
           hover:translate-y-[1px]
           transition"
  >
    Create &amp; Open
  </button>
</div>




    <nav class="nav-bottom fixed bottom-0 left-0 right-0 px-4 py-3 z-40">
        <div class="flex justify-around items-center">
            <a href="index.html" class="nav-item active flex flex-col items-center space-y-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg><span class="text-xs">Projects</span></a>
            <a href="scripts.html" class="nav-item text-gray-500 flex flex-col items-center space-y-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/></svg><span class="text-xs">Scripts</span></a>
            <a href="footage.html" class="nav-item text-gray-500 flex flex-col items-center space-y-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"/></svg><span class="text-xs">Footage</span></a>
            <a href="ai-tools.html" class="nav-item text-gray-500 flex flex-col items-center space-y-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12,2A2,2 0 0,1 14,4C14,4.74 13.6,5.39 13,5.73V7H14A7,7 0 0,1 21,14H22A1,1 0 0,1 23,15V18A1,1 0 0,1 22,19H21V20A2,2 0 0,1 19,22H5A2,2 0 0,1 3,20V19H2A1,1 0 0,1 1,18V15A1,1 0 0,1 2,14H3A7,7 0 0,1 10,7H11V5.73C10.4,5.39 10,4.74 10,4A2,2 0 0,1 12,2Z"/></svg><span class="text-xs">AI Tools</span></a>
        </div>
    </nav>

    <!-- Account Settings Panel -->
<div id="accountPanelOverlay" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-40 hidden"></div>

<div id="accountPanel" class="fixed top-0 right-0 h-full w-full max-w-md bg-[#050505] border-l border-orange-500/40 shadow-2xl z-50 translate-x-full transition-transform duration-300">
  <div class="flex items-center justify-between px-6 py-4 border-b border-white/10">
    <div>
      <p class="text-sm uppercase tracking-[0.2em] text-orange-400">Account</p>
      <h2 class="text-xl font-semibold text-white">Profile & preferences</h2>
    </div>
    <button id="accountPanelClose" class="w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center text-gray-300">
      ‚úï
    </button>
  </div>

  <div class="px-6 py-5 space-y-6 overflow-y-auto h-[calc(100%-64px)]">
    <!-- Profile -->
    <section class="bg-white/5 border border-white/10 rounded-2xl p-4 flex gap-4 items-center">
      <div class="w-14 h-14 rounded-full overflow-hidden border border-orange-400/70 bg-black/70 flex items-center justify-center">
        <img id="panelAvatarImg" src="" class="w-full h-full object-cover hidden" alt="Avatar">
        <span id="panelAvatarFallback" class="text-lg font-semibold text-orange-300">U</span>
      </div>
      <div class="flex-1">
        <p id="panelName" class="text-white font-semibold text-sm">User name</p>
        <p id="panelEmail" class="text-xs text-gray-400 truncate">email@example.com</p>
        <span id="panelRole" class="inline-block mt-1 px-2 py-0.5 rounded-full text-[10px] uppercase tracking-wide bg-orange-500/10 text-orange-300 border border-orange-500/40">User</span>
      </div>
      <button id="panelChangeAvatar" class="text-[11px] px-2 py-1 rounded-lg border border-white/15 text-gray-200 hover:bg-white/5">
        Change
      </button>
      <input id="panelAvatarInput" type="file" accept="image/*" class="hidden">
    </section>

    <!-- Appearance -->
    <section class="bg-white/5 border border-white/10 rounded-2xl p-4 space-y-3">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-xs font-semibold text-gray-200">Appearance</p>
          <p class="text-[11px] text-gray-400">Choose how IMRAN SQUARE looks.</p>
        </div>
      </div>
      <div class="flex gap-2">
        <button id="themeAdvanced" class="flex-1 px-3 py-2 rounded-xl border border-orange-500/60 bg-orange-500/10 text-xs text-orange-100">
          Advanced (Cinematic)
        </button>
        <button id="themeBasic" class="flex-1 px-3 py-2 rounded-xl border border-white/15 bg-black/60 text-xs text-gray-200">
          Basic (Day / Light)
        </button>
      </div>
    </section>

    <!-- Session -->
    <section class="bg-white/5 border border-white/10 rounded-2xl p-4 space-y-3">
      <p class="text-xs font-semibold text-gray-200">Session</p>
      <button id="panelSignOut" class="w-full text-left px-3 py-2 rounded-xl border border-red-500/40 text-xs text-red-300 hover:bg-red-500/10">
        Sign out from this device
      </button>
    </section>
  </div>
</div>

<script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyA_D3AuwSzHKgs5svcwRoP0St2Nc-delF8",
            authDomain: "iimransquare.firebaseapp.com",
            projectId: "iimransquare",
            storageBucket: "iimransquare.firebasestorage.app",
            messagingSenderId: "431645042472",
            appId: "1:431645042472:web:87e7cea4659d6a0564121d",
            measurementId: "G-Z0EN14J4XM"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        
   function showDashToast(msg, timeout = 3000) {
  const el = document.getElementById('dashToast');
  if (!el) return;
  el.textContent = msg;
  el.classList.remove('hidden');
  clearTimeout(window.__dashToastTimer);
  window.__dashToastTimer = setTimeout(() => {
    el.classList.add('hidden');
  }, timeout);
}
<div id="dashToast"
     class="hidden fixed bottom-6 left-1/2 -translate-x-1/2 px-4 py-2 rounded-full bg-white/90 text-xs text-black shadow-lg z-50">
  Welcome back.
</div>


        // 2. Logout Function (Global)
        window.logoutApp = () => {
            signOut(auth).then(() => {
                localStorage.removeItem('imranUser');
                window.location.href = "landing.html";
            });
        };
    </script>
    <script src="main.js"></script>
    <script src="dashboard-advanced.js"></script>

        <!-- PWA Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker
            .register('/service-worker.js')
            .then((registration) => {
              console.log('‚úÖ ServiceWorker registered:', registration.scope);
            })
            .catch((error) => {
              console.error('‚ùå ServiceWorker registration failed:', error);
            });
        });
      }
    </script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    console.log("‚úÖ Main Script Loaded: Fixing Avatar Button...");

    // 1. IDs Define karo (Jo humne Header mein diye the)
    const avatarBtn = document.getElementById('userAvatarButton');
    const userMenu = document.getElementById('userMenu');
    
    // 2. Data Load karo (LocalStorage se)
    const userStr = localStorage.getItem('imranUser');
    
    if (userStr) {
        const user = JSON.parse(userStr);
        
        // A. Initials Set karo (Header mein)
        const initials = (user.firstName?.[0] || '') + (user.lastName?.[0] || '');
        const fallbackEl = document.getElementById('userAvatarFallback');
        if(fallbackEl) fallbackEl.textContent = initials || 'IS';

        // B. Menu ke andar Naam/Email Set karo
        if(document.getElementById('userMenuName')) 
            document.getElementById('userMenuName').textContent = user.username || 'User';
        
        if(document.getElementById('userMenuEmail')) 
            document.getElementById('userMenuEmail').textContent = user.email || '';

        // C. Welcome Text Set karo
        if(document.getElementById('dashboardUserName'))
            document.getElementById('dashboardUserName').textContent = user.username || 'Creator';
    }

    // 3. Button Click Logic (Hammer Fix üî®)
    if (avatarBtn && userMenu) {
        // Clone node to remove old broken listeners from dashboard-advanced.js
        const newAvatarBtn = avatarBtn.cloneNode(true);
        avatarBtn.parentNode.replaceChild(newAvatarBtn, avatarBtn);

        // Naya listener lagao
        newAvatarBtn.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            console.log("üîò Avatar Clicked!"); 
            userMenu.classList.toggle('hidden');
        });

        // Bahar click karne par band karo
        document.addEventListener('click', (e) => {
            if (!newAvatarBtn.contains(e.target) && !userMenu.contains(e.target)) {
                userMenu.classList.add('hidden');
            }
        });
        
        console.log("‚úÖ Avatar Button Logic Attached Successfully");
    } else {
        console.error("‚ùå Avatar Button or Menu NOT found in HTML");
    }

    // 4. Sign Out Logic
    const signOutBtn = document.getElementById('userMenuSignOut');
    if (signOutBtn) {
        signOutBtn.addEventListener('click', (e) => {
            e.preventDefault();
            console.log("üëã Signing Out...");
            localStorage.removeItem('imranUser');
            localStorage.removeItem('userEmail');
            window.location.href = 'landing.html';
        });
    }
  });
</script>

</body>
</html>